# utils.py
import tempfile
import os
import hashlib

def create_temp_file(code: str, suffix=".py") -> str:
    """Create a temp file with code content; return path."""
    with tempfile.NamedTemporaryFile(mode="w", suffix=suffix, delete=False) as tf:
        tf.write(code)
        return tf.name

def hash_snippet(snippet: str) -> str:
    """Return SHA256 hash for caching or deduplication."""
    return hashlib.sha256(snippet.encode()).hexdigest()

def cleanup_file(path: str):
    """Remove temp file safely."""
    try:
        os.remove(path)
    except Exception:
        pass
